<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Voice Agent Demo - Cameron O'Brien</title>
  <link rel="icon" type="image/png" href="/public/favicon.png">
  <link rel="stylesheet" href="/public/demo.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <h1 class="title">Voice Agent Demo</h1>
      <p class="tagline">Real-time AI voice conversations</p>
    </header>

    <main class="main">
      <!-- Demo Call Section -->
      <div class="demo-card">
        <div class="demo-section">
          <h2>Try It Live</h2>
          <p class="demo-intro">Call our demo number to experience the AI voice agent in action. It demonstrates natural conversation and can answer your questions.</p>

          <button class="btn btn-primary" id="revealPhoneBtn">
            <span class="btn-text">Call Demo Number →</span>
          </button>

          <div class="phone-revealed" id="phoneRevealed"></div>
        </div>

        <!-- How It Works Flow Diagram -->
        <div class="flow-section">
          <h3>How It Works</h3>

          <!-- Phase 1: The Connection -->
          <div class="flow-phase">
            <h4 class="phase-label">Phase 1: Connection</h4>
            <div class="flow-grid">
              <div class="flow-card">
                <div class="flow-card-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" fill="#FFFFFF"><path d="M760-480q0-117-81.5-198.5T480-760v-80q75 0 140.5 28.5t114 77q48.5 48.5 77 114T840-480h-80Zm-160 0q0-50-35-85t-85-35v-80q83 0 141.5 58.5T680-480h-80Zm198 360q-125 0-247-54.5T329-329Q229-429 174.5-551T120-798q0-18 12-30t30-12h162q14 0 25 9.5t13 22.5l26 140q2 16-1 27t-11 19l-97 98q20 37 47.5 71.5T387-386q31 31 65 57.5t72 48.5l94-94q9-9 23.5-13.5T670-390l138 28q14 4 23 14.5t9 23.5v162q0 18-12 30t-30 12ZM241-600l66-66-17-94h-89q5 41 14 81t26 79Zm358 358q39 17 79.5 27t81.5 13v-88l-94-19-67 67ZM241-600Zm358 358Z"/></svg>
                </div>
                <div class="flow-card-title">You Call</div>
                <div class="flow-card-badge">Your Phone</div>
                <div class="flow-card-explanation">Dial our demo number from any phone - landline or mobile. This system helps business owners never miss after-hours calls. Customers reach an intelligent AI instead of voicemail.</div>
              </div>
              <div class="flow-card">
                <div class="flow-card-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" fill="#FFFFFF"><path d="M320-480v80q0 66 47 113t113 47q66 0 113-47t47-113v-80H320Zm160 180q-42 0-71-29t-29-71v-20h200v20q0 42-29 71t-71 29ZM340-680q-38 0-67.5 27.5T231-577l58 14q6-26 20-41.5t31-15.5q17 0 31 15.5t20 41.5l58-14q-12-48-41.5-75.5T340-680Zm280 0q-38 0-67.5 27.5T511-577l58 14q6-26 20-41.5t31-15.5q17 0 31 15.5t20 41.5l58-14q-12-48-41.5-75.5T620-680ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 320q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Z"/></svg>
                </div>
                <div class="flow-card-title">We Answer</div>
                <div class="flow-card-badge">Twilio</div>
                <div class="flow-card-explanation">Twilio is a cloud platform that routes phone calls through the internet, connecting your call to our AI system instead of a traditional phone line.</div>
              </div>
            </div>
          </div>

          <!-- Vertical connector arrow -->
          <div class="flow-connector">
            <svg viewBox="0 0 24 40" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 0v32M5 25l7 7 7-7"/>
            </svg>
          </div>

          <!-- Phase 2: The Conversation Loop -->
          <div class="flow-phase">
            <h4 class="phase-label">Phase 2: Conversation Loop</h4>
            <div class="flow-grid flow-grid-loop">
              <div class="flow-dot"></div>
              <div class="flow-card">
                <div class="flow-card-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" fill="#FFFFFF"><path d="M80-80v-80q46 0 91-6t88-22q-46-23-72.5-66.5T160-349v-91h160v-120h135L324-822l72-36 131 262q20 40-3 78t-68 38h-56v40q0 33-23.5 56.5T320-360h-80v11q0 35 21.5 61.5T316-252l12 3q40 10 45 50t-31 60q-60 33-126.5 46T80-80Zm572-114-57-56q21-21 33-48.5t12-59.5q0-32-12-59.5T595-466l57-57q32 32 50 74.5t18 90.5q0 48-18 90t-50 74ZM765-80l-57-57q43-43 67.5-99.5T800-358q0-66-24.5-122T708-579l57-57q54 54 84.5 125T880-358q0 81-30.5 152.5T765-80Z"/></svg>
                </div>
                <div class="flow-card-title">You Speak</div>
                <div class="flow-card-badge">Vocal Chords</div>
                <div class="flow-card-explanation">Talk naturally into your phone, just like you would with a human. Ask questions, give commands, or have a conversation.</div>
              </div>
              <div class="flow-card">
                <div class="flow-card-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" fill="#FFFFFF"><path d="M240-80q62 0 101.5-31t60.5-91q17-50 32.5-70t71.5-64q62-50 98-113t36-151q0-119-80.5-199.5T360-880q-119 0-199.5 80.5T80-600h80q0-85 57.5-142.5T360-800q85 0 142.5 57.5T560-600q0 68-27 116t-77 86q-52 38-81 74t-43 78q-14 44-33.5 65T240-160q-33 0-56.5-23.5T160-240H80q0 66 47 113t113 47Zm120-420q42 0 71-29.5t29-70.5q0-42-29-71t-71-29q-42 0-71 29t-29 71q0 41 29 70.5t71 29.5Zm380 121-59-59q19-37 29-77.5t10-84.5q0-44-10-84t-29-77l59-59q29 49 44.5 104.5T800-600q0 61-15.5 116.5T740-379Zm117 116-59-58q39-60 60.5-130T880-598q0-78-22-148.5T797-877l60-60q49 72 76 157.5T960-600q0 94-27 179.5T857-263Z"/></svg>
                </div>
                <div class="flow-card-title">We Listen</div>
                <div class="flow-card-badge">Deepgram</div>
                <div class="flow-card-explanation">Deepgram is an AI speech recognition service that converts your spoken words into text in real-time with remarkable accuracy, even handling accents and background noise.</div>
              </div>
              <div class="flow-card">
                <div class="flow-card-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" fill="#FFFFFF"><path d="M323-160q-11 0-20.5-5.5T288-181l-78-139h58l40 80h92v-40h-68l-40-80H188l-57-100q-2-5-3.5-10t-1.5-10q0-4 5-20l57-100h104l40-80h68v-40h-92l-40 80h-58l78-139q5-10 14.5-15.5T323-800h97q17 0 28.5 11.5T460-760v160h-60l-40 40h100v120h-88l-40-80h-92l-40 40h108l40 80h112v200q0 17-11.5 28.5T420-160h-97Zm217 0q-17 0-28.5-11.5T500-200v-200h112l40-80h108l-40-40h-92l-40 80h-88v-120h100l-40-40h-60v-160q0-17 11.5-28.5T540-800h97q11 0 20.5 5.5T672-779l78 139h-58l-40-80h-92v40h68l40 80h104l57 100q2 5 3.5 10t1.5 10q0 4-5 20l-57 100H668l-40 80h-68v40h92l40-80h58l-78 139q-5 10-14.5 15.5T637-160h-97Z"/></svg>
                </div>
                <div class="flow-card-title">AI Thinks</div>
                <div class="flow-card-badge">Groq</div>
                <div class="flow-card-explanation">Groq provides ultra-fast AI computing that processes your question and generates an intelligent, contextual response in milliseconds - faster than any other AI infrastructure.</div>
              </div>
              <div class="flow-card">
                <div class="flow-card-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" fill="#FFFFFF" style="transform: scaleX(-1);"><path d="M80-80v-80q46 0 91-6t88-22q-46-23-72.5-66.5T160-349v-91h160v-120h135L324-822l72-36 131 262q20 40-3 78t-68 38h-56v40q0 33-23.5 56.5T320-360h-80v11q0 35 21.5 61.5T316-252l12 3q40 10 45 50t-31 60q-60 33-126.5 46T80-80Zm572-114-57-56q21-21 33-48.5t12-59.5q0-32-12-59.5T595-466l57-57q32 32 50 74.5t18 90.5q0 48-18 90t-50 74ZM765-80l-57-57q43-43 67.5-99.5T800-358q0-66-24.5-122T708-579l57-57q54 54 84.5 125T880-358q0 81-30.5 152.5T765-80Z"/></svg>
                </div>
                <div class="flow-card-title">We Respond</div>
                <div class="flow-card-badge">Cartesia</div>
                <div class="flow-card-explanation">Cartesia is AI voice synthesis that converts the text response into natural, human-sounding speech. The voice you hear is generated in real-time, not pre-recorded.</div>
              </div>
            </div>
            <!-- Loop indicator -->
            <div class="flow-loop-indicator">
              <span>↻ This cycle repeats for the entire conversation</span>
            </div>
          </div>

          <p class="flow-caption">Total response time: under 1 second</p>
        </div>

        <!-- How It's Built Section -->
        <div class="architecture-section">
          <h3>How It's Built</h3>
          <p class="architecture-intro">
            A real-time voice pipeline powered by best-in-class APIs, orchestrated on Fly.io infrastructure.
          </p>

          <div class="tech-stack">
            <div class="tech-item">Twilio Media Streams</div>
            <div class="tech-item">Deepgram STT</div>
            <div class="tech-item">Groq Llama 3.3 70B</div>
            <div class="tech-item">Cartesia Sonic 3</div>
            <div class="tech-item">Neon PostgreSQL</div>
            <div class="tech-item">Fly.io</div>
          </div>
        </div>

        <!-- What It Does Section -->
        <div class="value-prop">
          <h3>What It Does</h3>
          <div class="benefits">
            <div class="benefit">
              <strong>Natural Conversation</strong>
              <span>Back-and-forth dialogue that sounds and feels human</span>
            </div>
            <div class="benefit">
              <strong>Business Context</strong>
              <span>Answers questions using your knowledge base and data</span>
            </div>
            <div class="benefit">
              <strong>Human-Like Voice</strong>
              <span>Ultra-realistic speech synthesis with sub-second latency</span>
            </div>
          </div>
        </div>

        <!-- Performance Metrics -->
        <div class="metrics-section">
          <h3>Performance</h3>
          <div class="metrics">
            <div class="metric">
              <div class="metric-value">~1s</div>
              <div class="metric-label">Total Response Latency</div>
            </div>
            <div class="metric">
              <div class="metric-value">8kHz</div>
              <div class="metric-label">Audio Quality (PCM mu-law)</div>
            </div>
            <div class="metric">
              <div class="metric-value">Direct WS</div>
              <div class="metric-label">No SDK overhead</div>
            </div>
          </div>
        </div>

        <!-- Challenges Faced -->
        <div class="challenges-section">
          <h3>Challenges Faced</h3>
          <div class="challenges">
            <div class="challenge">
              <div class="challenge-header">
                <strong>SDK WebSocket Bug</strong>
                <span class="challenge-status status-resolved">Resolved</span>
              </div>
              <p>The Cartesia TTS SDK v2.2.9 had a critical bug where <code>websocket.send()</code> hung indefinitely in Node.js, causing 10-second timeouts and complete silence. Solution: bypassed the SDK entirely and implemented direct WebSocket connection to Cartesia's API.</p>
            </div>
            <div class="challenge">
              <div class="challenge-header">
                <strong>LLM Function Call Leakage</strong>
                <span class="challenge-status status-progress">Fix in Progress</span>
              </div>
              <p>LLMs sometimes "leak" internal function call syntax into their spoken responses, saying things like "Note: customer wants..." instead of speaking naturally while silently collecting data. This is a common challenge when LLMs have both conversational and tool-calling responsibilities.</p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer class="footer">
      <a href="https://github.com/cameronobriendev/fly-voice-agent" target="_blank" rel="noopener">
        View on GitHub →
      </a>
    </footer>
  </div>

  <!-- Toast Container -->
  <div id="toastContainer"></div>

  <script src="/public/demo.js"></script>
</body>
</html>
